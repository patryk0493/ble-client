(this["webpackJsonpble-client"]=this["webpackJsonpble-client"]||[]).push([[0],{194:function(e,t,c){"use strict";c.r(t);var n,a,r=c(5),s=c(0),i=c(25),o=(c(103),c(24)),u=c.n(o),b=c(36),d=c(21),l=c(203),j=c(201),O=c(204),p=c(202),x=c(200),f=c(198),v=c(199),h=c(92),m=c.n(h),g=c(38),y=c(205),C=c(206),k=c(207),w=[{uuid:"beb5483e-36e1-4688-b7f5-ea07361b26a8",type:"NH3"},{uuid:"a9c871ea-408b-11eb-b378-0242ac130002",type:"CO"},{uuid:"32030236-416e-11eb-b378-0242ac130002",type:"NO2"},{uuid:"378dfe5e-416e-11eb-b378-0242ac130002",type:"C3H8"},{uuid:"3b78a87a-416e-11eb-b378-0242ac130002",type:"C4H10"},{uuid:"42161564-416e-11eb-b378-0242ac130002",type:"CH4"},{uuid:"45cb679a-416e-11eb-b378-0242ac130002",type:"H2"},{uuid:"49c043a2-416e-11eb-b378-0242ac130002",type:"C2H5OH"},{uuid:"4d55b4c0-416e-11eb-b378-0242ac130002",type:"O2"},{uuid:"2df89ce0-720b-4ebb-a0d0-522ba6344971",type:"UPTIME"}],H=new TextDecoder("utf-8"),S=function(){var e=Object(s.useState)(void 0),t=Object(d.a)(e,2),c=t[0],i=t[1],o=Object(s.useState)(void 0),v=Object(d.a)(o,2),h=v[0],S=v[1],N=Object(s.useState)(void 0),D=Object(d.a)(N,2),A=D[0],I=D[1],T=Object(s.useState)(void 0),U=Object(d.a)(T,2),J=U[0],M=U[1],P=Object(s.useState)(void 0),F=Object(d.a)(P,2),L=F[0],q=F[1],B=Object(s.useState)(void 0),G=Object(d.a)(B,2),W=G[0],z=G[1],K=Object(s.useState)(void 0),Q=Object(d.a)(K,2),R=Q[0],V=Q[1],X=Object(s.useState)(void 0),Y=Object(d.a)(X,2),Z=Y[0],$=Y[1],_=Object(s.useState)(void 0),ee=Object(d.a)(_,2),te=ee[0],ce=ee[1],ne=Object(s.useState)(void 0),ae=Object(d.a)(ne,2),re=ae[0],se=ae[1],ie=Object(s.useState)("disconnected"),oe=Object(d.a)(ie,2),ue=oe[0],be=oe[1],de=function(){var e=Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"connected"===ue&&n&&(be("disconnecting"),l.a.info({message:"Disconnecting...",description:""}),n.disconnect());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le=function(e){return function(t){var c=t.type,n=e.target;if(e&&n){var a=n.value,r=H.decode(a);switch(c){case"NH3":i(r);break;case"CO":S(r);break;case"NO2":I(r);break;case"C3H8":M(r);break;case"C4H10":q(r);break;case"CH4":z(r);break;case"H2":V(r);break;case"C2H5OH":$(r);break;case"O2":ce(r);break;case"UPTIME":se(r)}}}},je=function(){var e=Object(b.a)(u.a.mark((function e(){var t,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.bluetooth.requestDevice({filters:[{name:"Air condition GATT server"}],optionalServices:["4fafc201-1fb5-459e-8fcc-c5c9c331914b","df36dcba-c5e4-499f-b0a9-ec9d1ad5c283","72d3039f-d086-475c-9454-9dfe8333599b"]});case 3:a=e.sent,e.next=12;break;case 6:return e.prev=6,e.t0=e.catch(0),l.a.info({message:"Connection aborted",description:"".concat(e.t0)}),be("error"),console.error(e.t0),e.abrupt("return");case 12:if(a&&a.gatt){e.next=14;break}return e.abrupt("return");case 14:return t=function e(t){l.a.info({message:"Device disconnected"}),be("disconnected"),a&&a.removeEventListener("gattserverdisconnected",e)},a.addEventListener("gattserverdisconnected",t),e.next=18,a.gatt.connect();case 18:return n=e.sent,e.next=21,n.getPrimaryServices();case 21:c=e.sent,r=function(){var e=Object(b.a)(u.a.mark((function e(t){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,c=w.find((function(e){return e.uuid===t.uuid}))){e.next=5;break}return l.a.error({message:"Characteristic with UUID: ".concat(t.uuid," not found!"),description:""}),e.abrupt("return");case 5:return e.next=7,t.startNotifications();case 7:e.sent.addEventListener("characteristicvaluechanged",(function(e){return le(e)(c)})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),l.a.error({message:"Error",description:JSON.stringify(e.t0)}),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),c.forEach(function(){var e=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,t.getCharacteristics();case 3:e.sent.forEach(function(){var e=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),l.a.success({message:"Connected",description:""}),be("connected");case 26:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(m.a,{className:"layout",children:[Object(r.jsxs)(g.Content,{style:{margin:"20px 20px",padding:"15px 15px",backgroundColor:"white"},children:[Object(r.jsxs)(j.a,{align:"middle",justify:"center",children:[Object(r.jsx)(O.a,{span:24,children:Object(r.jsxs)("h1",{style:{textAlign:"center"},children:["Welcome to the ",Object(r.jsx)("b",{children:"Air Condition"})," app"]})}),Object(r.jsx)(O.a,{sm:24,children:Object(r.jsxs)("p",{style:{textAlign:"center"},children:["Enable the chrome flag"," ",Object(r.jsx)("a",{href:"chrome://flags/#enable-experimental-web-platform-features",children:"#enable-experimental-web-platform-features"})," ",Object(r.jsx)("br",{}),"and open in a new window."]})}),Object(r.jsx)(O.a,{sm:24,md:18,lg:12,xl:8,children:Object(r.jsxs)(j.a,{justify:"space-between",children:[Object(r.jsx)(O.a,{style:{display:"flex",alignItems:"center"},children:Object(r.jsxs)("div",{children:[Object(r.jsx)("p",{style:{margin:"0em 1em 0 0",display:"inline-block",padding:0},children:"Status:"}),Object(r.jsx)(p.a,{icon:Object(r.jsx)(y.a,{}),color:"connected"===ue?"success":"blue",children:"connected"===ue?"Connected":"Disconnected"})]})}),Object(r.jsxs)(O.a,{children:["connected"!==ue&&Object(r.jsx)(x.a,{type:"primary",onClick:je,children:"Connect"}),"connected"===ue&&Object(r.jsx)(x.a,{danger:!0,onClick:de,icon:Object(r.jsx)(C.a,{}),children:"Disconnect"})]})]})})]}),Object(r.jsx)(f.a,{orientation:"left",plain:!0,children:"Sensors values:"}),Object(r.jsxs)(j.a,{children:[Object(r.jsx)(E,{title:"NH3",value:c}),Object(r.jsx)(E,{title:"CO",value:h}),Object(r.jsx)(E,{title:"NO2",value:A}),Object(r.jsx)(E,{title:"C3H8",value:J}),Object(r.jsx)(E,{title:"C4H10",value:L}),Object(r.jsx)(E,{title:"CH4",value:W}),Object(r.jsx)(E,{title:"H2",value:R}),Object(r.jsx)(E,{title:"C2H5OH",value:Z}),Object(r.jsx)(E,{title:"O2",value:te}),Object(r.jsx)(E,{title:"UPTIME",value:re,icon:Object(r.jsx)(k.a,{})})]})]}),Object(r.jsx)(g.Footer,{style:{textAlign:"center"},children:"Marcin Jo\u0144ca, 2020"})]})})},E=function(e){var t=e.title,c=e.value,n=void 0===c?"unknown":c,a=e.icon,s=void 0===a?Object(r.jsx)(r.Fragment,{}):a;return Object(r.jsx)(O.a,{xs:24,sm:12,md:8,xl:6,xxl:4,children:Object(r.jsx)("div",{style:{padding:"10px"},children:Object(r.jsx)(v.a,{title:t,value:n,prefix:s})})})};Object(i.render)(Object(r.jsx)(S,{}),document.getElementById("root"))}},[[194,1,2]]]);
//# sourceMappingURL=main.b2dac83f.chunk.js.map